!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,i){var n=i(9);e.exports=function(e,t){t=t||Object;try{var i=n(e,t)}catch(e){fml.debug(e)}return i}},function(e,t){!function(e){function t(e,t){var i=this;i.wrap=e,i.ul=i.wrap.find(t.ul),i.li=i.ul.find(t.li),i.len=i.li.length,i.liWidth=i.li.outerWidth(!0),i.liHeight=i.li.outerHeight(!0),i.numBox=i.wrap.find(t.numBox),i.prev=i.wrap.find(t.prev),i.next=i.wrap.find(t.next),i.isAuto=t.isAuto,i.lazyLoad=t.lazyLoad,i.imgSrc=t.imgSrc,i.displayNum=t.displayNum,i.cur=t.cur,i.evt=t.evt,i.effect=t.effect,i.speed=t.speed,i.autoTime=t.autoTime,i.index=t.index,i.numBoxB=null,i.timer=null,i.direction=null,i.step=null,i.dbclicks=!1,i.moveObj={},i.moveObj2={},i.prevIndex=0,i.init()}t.prototype={init:function(){var e=this;e.config(),e.autoPlay(),e.bind()},config:function(){var e=this;if(e.speed=e.speed>=e.autoTime?e.autoTime-100:e.speed,e.index<=0?e.index=0:e.index>=e.len&&(e.index=e.len-1),e.displayNum){e.numBox.empty();for(var t=0;t<e.len;t++)e.numBox.append("<b>"+(t+1)+"</b>")}if(e.numBoxB=e.numBox.children(),e.numBoxB.eq(e.index).addClass(e.cur),e.lazyLoad)for(var i=0;i<e.len;i++)e.li.eq(i).append("<div class='loading-cover'></div>");switch(e.lazyLoad&&e.loadImg(e.index),e.effect){case 0:e.li.hide().eq(e.index).show();break;case 1:e.direction="left",e.step=e.liWidth;break;case 2:e.direction="top",e.step=e.liHeight}0!=e.effect&&e.li.css(e.direction,e.step).eq(e.index).css(e.direction,0).addClass("prevIndexLi"),e.moveObj[e.direction]=0},move:function(){var e=this;if(!e.dbclicks)switch(e.prevIndex=e.wrap.find(".prevIndexLi").index(),0==arguments[0]?(e.index<e.len-1?e.index++:e.index=0,0!=e.effect&&(e.moveObj2[e.direction]=-e.step,e.li.eq(e.index).css(e.direction,e.step))):1==arguments[0]?(e.index<=0?e.index=e.len-1:e.index--,0!=e.effect&&(e.moveObj2[e.direction]=e.step,e.li.eq(e.index).css(e.direction,-e.step))):e.prevIndex<e.index?(e.moveObj2[e.direction]=-e.step,0!=e.effect&&e.li.eq(e.index).css(e.direction,e.step)):(e.moveObj2[e.direction]=e.step,0!=e.effect&&e.li.eq(e.index).css(e.direction,-e.step)),e.li.removeClass("prevIndexLi").eq(e.index).addClass("prevIndexLi"),e.effect){case 0:e.li.stop(!0,!0).fadeOut(e.speed).eq(e.index).fadeIn(e.speed,function(){e.dbclicks=!1,e.loadImg(e.index)}),e.numBoxB.removeClass(e.cur).eq(e.index).addClass(e.cur);break;case 1:case 2:e.li.eq(e.prevIndex).stop(!0,!0).animate(e.moveObj2,e.speed),e.li.eq(e.index).stop(!0,!0).animate(e.moveObj,e.speed,function(){e.dbclicks=!1,e.loadImg(e.index)}),e.numBoxB.removeClass(e.cur).eq(e.index).addClass(e.cur),e.index==e.len&&e.numBoxB.removeClass(e.cur).eq(0).addClass(e.cur)}},loadImg:function(e,t){var i=this;if(i.lazyLoad){var n=i.li.eq(e).find("img");if(n.attr(i.imgSrc)){var o=new Image;o.src=n.attr(i.imgSrc),o.onload=function(){n.attr("src",o.src),n.removeAttr(i.imgSrc),i.li.eq(e).find(".loading-cover").remove(),t&&"function"==typeof t&&t()}}}},autoPlay:function(){var e=this;clearInterval(e.timer),e.isAuto&&(e.timer=setInterval(function(){e.move(0)},e.autoTime))},hoverStop:function(e){var t=this;e.hover(function(){clearInterval(t.timer)},function(){t.autoPlay()})},bind:function(){var t=this;if(t.hoverStop(t.li),0==t.evt){t.prev.hide(),t.next.hide();var i;t.numBoxB.hover(function(){clearInterval(t.timer),e(this).hasClass(t.cur)||(t.index=t.numBoxB.index(this),i=setTimeout(function(){t.move()},200))},function(){clearTimeout(i),t.autoPlay()})}else 1==t.evt&&(t.hoverStop(t.numBoxB),t.hoverStop(t.prev),t.hoverStop(t.next),t.numBoxB.click(function(){e(this).hasClass(t.cur)||(t.index=t.numBoxB.index(this),t.move())}),t.prev.click(function(){t.move(1),t.dbclicks=!0}),t.next.click(function(){t.move(0),t.dbclicks=!0}))}},e.fn.imageSlide=function(i){var n=e.extend({},e.fn.imageSlide.defaults,i);this.each(function(){new t(e(this),n)})},e.fn.imageSlide.defaults={index:0,ul:"ul",li:"li",numBox:".num",prev:".prev",next:".next",cur:"cur",isAuto:!0,lazyLoad:!1,imgSrc:"data-src",displayNum:!0,evt:1,effect:1,speed:500,autoTime:5e3}}(jQuery)},function(e,t){e.exports={meiliDialog:function(e){var t={maskId:"maskLayer",dialogId:"dialogLayer",dialogTitle:"标题",dialogContent:"",showHeader:!0,dialogHeight:null,isOverflow:!0,isMaskLayer:!0,onClose:function(){},onStart:function(){}},i=$.browser.msie,n=$.extend({},t,e),o=function(){var e=$('<div id="'+n.maskId+'" class="'+n.maskId+'"></div>');$("body").append(e);var t=$(document).width(),i=$(document).height();n.isOverflow?e.css({width:t+20,height:i}):(e.css({width:t,height:i}),$(window).bind("scroll",function(){t=$(document).width(),i=$(document).height(),e.css({width:t,height:i})}))},a=function(){var e="";n.showHeader&&(e='<div id="dialogTitle"><span class="closeDialog close_z"></span><span id="dialogTitleText">'+n.dialogTitle+"</span></div>");var t=$('<div id="'+n.dialogId+'" >'+e+'<div id="dialogContent" ></div></div>');$("body").append(t),$("#dialogContent").append(n.dialogContent).append('<div class="clear_f"></div>'),r(),s(),$(".closeDialog").click(function(){l()})},r=function(){var e=$("#"+n.dialogId),t=parseInt(e.css("padding-top"));if("fixed"==e.css("position")){var i=($(window).height()-e.height())/4-t,o=($(window).width()-e.width())/2-t;e.css({top:i,left:o})}else{var i=$(document).scrollTop()+($(window).height()-e.height())/3-t,o=$(document).scrollLeft()+($(window).width()-e.width())/2-t;i<0&&(i=20),e.css({top:i,left:o})}},s=function(){n.isOverflow?($("body").css("overflow","hidden"),i&&$("html").css("overflow","visible")):i?$(window).bind("scroll",function(){r($("#"+n.dialogId))}):$("#"+n.dialogId).css({position:"fixed"})},l=function(){$("."+n.maskId).remove(),$("#"+n.dialogId).remove(),$("body").css("overflow","auto"),i&&$("html").css({overflow:"auto","overflow-x":"hidden"}),n.onClose(n)};return function(){$("#"+n.maskId).remove(),$("#"+n.dialogId).remove(),$(document).bind("keyup",function(e){27==e.keyCode&&l()}),1==n.isMaskLayer&&o(),a(),n.onStart(n)}(),l}}},function(e,t){var i=!1,n=!1,o={cookieArr:{},options:{domain:".meilishuo.com",path:"/"},setCookie:function(e,t,i){i=i||{};var n=e+"="+encodeURIComponent(t);if(i.domain||(i.domain=this.options.domain),i.path||(i.path=this.options.path),n+="; domain="+i.domain,i.path&&(n+="; path="+i.path),i.duration){var o=new Date;o.setTime(o.getTime()+1e3*i.duration),n+="; expires="+o.toGMTString()}return i.secure&&(n+="; secure"),document.cookie=n+";"},getCookie:function(e,t){this.cookieArr[e]=this.cookieArr[e]||function(){"string"!=typeof e&&(e=e.toString());var t=window.document.cookie.match("(?:^|;)\\s*"+e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+"=([^;]*)");return t?decodeURIComponent(t[1]):void 0}();var i=this.cookieArr[e];return t?t(i):i},removeCookie:function(e){return this.setCookie(e,"",{duration:-1})}},a={set:function(e,t,i,n){i?sessionStorage.setItem(e,t):localStorage.setItem(e,t),"function"==typeof n&&n()},get:function(e,t,i){try{i(t?sessionStorage.getItem(e):localStorage.getItem(e))}catch(e){}},remove:function(e,t){t?sessionStorage.removeItem(e):localStorage.removeItem(e)}},r={flash:document.getElementById("storage"),sessionId:"",callback:[],init:function(e){if(e&&(this.sessionId=this.sessionId||o.getCookie("PHPSESSID")),!i&&!n){n=!0;var t=(new Date,document.createElement("div")),a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="storage"';a+='codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" width="1" height="1">',a+='<param name="movie" value="http://i.meilishuo.net/css/images/window/storage1.swf" />',a+='<param name="quality" value="high" />',a+='<param name="allowScriptAccess" value="always" />',a+="</object>",t.innerHTML=a,document.body.appendChild(t),this.flash=document.getElementById("storage")}},detectIE:function(){var e=navigator.userAgent.toLowerCase();if(window.ActiveXObject){var t=e.match(/msie ([\d.]+)/)[1];if(t>=5.5&&t<8)return!0}return!1},set:function(e,t,n,o){function a(e,t,i){if(i){var n=new Date;n=parseInt(n.getTime()/36e5),r.flash.setSessionTime(n),r.flash.setSessionVal(r.sessionId+e,n),r.flash.set(r.sessionId+e,t)}else r.flash.set(e,t)}var r=this;r.init(n),i?(a(e,t,n),"function"==typeof o&&o()):r.callback.push(function(){a(e,t,n),"function"==typeof o&&o()})},get:function(e,t,n){function o(e,t){return t?(a.flash.removeAllSession(),a.flash.get(a.sessionId+e)):a.flash.get(e)}var a=this;a.init(t),i?n(o(e,t)):a.callback.push(function(){n(o(e,t))})},remove:function(e,t){var n=this;if(n.init(t),!i){var n=this;return void window.setTimeout(function(){n.remove(e,t)},100)}t?n.flash.remove(n.sessionId+e):n.flash.remove(e)}},s={set:function(e,t,i,n){i?o.setCookie(e,t):o.setCookie(e,t,{duration:15552e3}),"function"==typeof n&&n()},get:function(e,t,i){i(o.getCookie(e))},remove:function(e,t){o.removeCookie(e)}},l=r.detectIE()?function(){try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash")?r:s}catch(e){return s}}():a;e.exports={isJSReady:function(){return!0},getAllowDomain:function(){var e=e||["www.meilishuo.com","newlab.meilishuo.com","newtest.meilishuo.com","wwwtest.meilishuo.com","cdjdev.meilishuo.com","xhdev.meilishuo.com","rwdev.meilishuo.com","nanodev.meilishuo.com"];return e},flashReadyHandler:function(){i=!0;for(var e=0,t=r.callback.length;e<t;e++)r.callback[e]()},setCookie:function(e,t,i){return o.setCookie(e,t,i)},getCookie:function(e,t){return o.getCookie(e,t)},removeCookie:function(e){return o.removeCookie(e)},setSession:function(e,t,i){return l.set(e,t,!0,i)},getSession:function(e,t){return l.get(e,!0,t)},removeSession:function(e){return l.remove(e,!0)},set:function(e,t,i){return l.set(e,t,!1,i)},get:function(e,t){return l.get(e,!1,t)},remove:function(e){return l.remove(e,!1)}}},function(e,t,i){function n(){f&&p&&(clearTimeout(g),g=setTimeout(function(){var e=c.scrollTop();if(1===p)h[0].check(e);else for(var t=0;t<p;t++)h[t].check(e)},x))}function o(e){m[e]?m[e]++:m[e]=1}function a(e,t){this.init(e),t||(h.push(this),p+=1)}var r=i(8),s=window,l=document,c=$(s),d=c.height(),u=c.width(),f=!1,h=[],p=0,m={},g=-1,v=!0,x=20,w={bg:function(e,t){var i=new Image,n=this.opt,a=n.useAnimate,r=n.el;e.data("lazyloaderover",1).data("lazyloadering",0),a&&e.addClass("lazyload-img-start"),".lazyload-placeholder"===r&&e.removeClass("lazyload-placeholder"),i.onload=i.onerror=function(a){a=a||window.event,i=null,"error"===a.type?(e.data("lazyloaderover",0),o(t)):e.css({"background-image":"url("+t+")","background-size":n.bgSize}).addClass("lazyload-img-end")},m[t]>5?i=null:i.src=t},img:function(e,t){var i=new Image,n=this.opt.el;i.title=e.attr("title"),i.alt=e.attr("alt"),i.onerror=function(){e.data("lazyloaderover",0),o(t)},(m[t]||0)<5&&(i.src=t,e.append(i)),e.data("lazyloaderover",1).data("lazyloadering",0),".lazyload-placeholder"===n&&e.removeClass("lazyload-placeholder")}};r.ready(function(){f=!0}),c.on("scroll.lazyload",n).on("resize",function(){d=c.height(),u=c.width()});var y={el:".lazyload-placeholder",attr:"src",auto:!0,stepX:40,stepY:40,loadStyle:"bg",bgSize:"cover",useAnimate:!0,root:""};a.prototype={constructor:a,init:function(e){if(this.opt=e=$.extend({},y,e),this._loader=w[e.loadStyle],!this._loader)throw Error('Do not support loadStyle:"'+e.loadStyle+'"');if(e.container&&$(e.container).on("scroll.lazyload",n),e.root){var t=$(e.root);1==t.length&&(e.$root=t)}v&&(v=!1,requestAnimationFrame(function(){c.triggerHandler("scroll.lazyload")}))},check:function(e){var t=this;requestAnimationFrame(function(){t._innerCheck(e)})},_innerCheck:function(e){if(f){var t=this.opt,i=t.el,n=t.stepX,o=t.stepY,a=t.$root,r=0,s=0,h=u,p=d,m=0;if(e||(e=c.scrollTop(),this.$$scrollTop=0),a){var g=a.offset(),v=a.width();r=g.left,h=Math.min(g.left+v,h)}for(this.$$scrollTop&&(this.$$scrollTop>e?p=Math.min(p,this.$$scrollTop-e):m=Math.max(m,p-(e-this.$$scrollTop))),this.$$scrollTop=e;r<=h;r+=n)for(s=m;s<=p;s+=o){var x,w=l.elementFromPoint(r,s);w&&(w.$$lazyloadImgType||(w.$$lazyloadImgType=1,x=$(w),1!=x.data("lazyloadering")&&1!=x.data("lazyloaderover")?x.is(i)&&(x.data("lazyloadering",1),this.load(x)):w.$$lazyloadImgType=2))}}},load:function(e){var t=this;e.hasClass("no-cdn-compress")?this._loader(e,e.data(this.opt.attr)):r.ready(function(){t._loader(e,r.parseImgSrc(e.data(t.opt.attr),e))})},destroy:function(){var e=h.indexOf(this);-1!==e&&(h.splice(e,1),p--)}},t.init=function(e){return new a(e)},t.load=function(e,t){var i,n=$(e),o=new a(t,!0),r=o.opt.el;i=n.is(r)?n:n.find(o.opt.el),i.each(function(e,t){o.load($(t))})}},function(e,t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.get=function(e){if(!e)throw Error("config cannot be null!");var t,o,a=e.id,r=n(a),s=!r&&"object"===(void 0===a?"undefined":i(a)),l=e.type||(r||s?"/multiget/4":"/get/3"),c=e.dataType||"jsonp",d=e.params||{},u=[];if(s){r=!0,t={};for(var f in a)u.push(a[f]),t[a[f]]=f;a=u}return o="ajax"===c?"json":"jsonp",r?d.pids=a.join(","):d.pid=a,$.ajax({url:"//mce.meilishuo.com/"+c+l,dataType:o,data:d}).then(function(e){if(r){if(s){var i={},n=e.data||{};for(var o in t)i[t[o]]=n[o]&&n[o].list||[];return i}return e.data||{}}return e.data&&e.data.list||[]})}},function(e,t,i){function n(e){return function(t){return t?t.sort(function(t,i){return e(t,i)||t.left-i.left})[0]:null}}function o(e,t){"string"==typeof t&&(t=t.split(b));try{t&&t.length&&t.forEach(function(t){e=e[t]})}catch(e){N("数据结构错误")}finally{return e}}function a(e,t){var i,n,o=t.helpers,a={};if(e&&e.length){for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);n=l,n.call(this,e,t,a),t.onLayoutFinished.call(this,t),t.useOptimise&&(t.hasMoved=!0,this.resetCurTop(),m.triggerHandler(t.touchMoveEventName))}}function r(e){return o(e,this._config._dataName)||[]}function s(e){if(m.height()-v-e<A)return!0}function l(e,t,i){var n,o,a,r,s,l,c,d=this.$el,u=t.tmpl,h=t.colWidth,p=t.useOptimise,m=t.colGapT,g=t.data.frame,v=t.isEqualHeight,w=t._boxHeight,y="",$=null,b=this._cols,C=this._colsHistory,I=C[g],S=this._boxes,A=[],j=0;if(I?b=I.map(function(e){return{min:e.min,max:e.min,left:e.left,frame:g}}):I=b.map(function(e){return{min:e.max,max:e.max,left:e.left,frame:g}}),e.forEach(function(e,n){i.v=e,i.index=n,i.totalIndex=t._totalIndex++,y+=f(u,i)}),d.append(n=x.html(y).children()),o=n.length,!y||!o)return N("没有获取到任何新的 DOM 节点, 请检查模板中是否正确处理了数据");if(n.each(function(e,i){var n,a;i.style.width=h+"px",v?(w||(w=t._boxHeight=i.offsetHeight),n=w):n=i.offsetHeight,$=B(b),B(I),a=$.max+"px",A.push({left:$.left,relativeTopStyle:a,top:$.max,width:h,height:n,index:e,el:i,boxLen:o,frame:g,state:p?t.isFirstFrame?_:k:_}),$.max+=n+m}),t.isFirstFrame=!1,C[g]||(C[g]=b.map(function(e,t){return{min:I[t].max,max:e.max,left:I[t].left,frame:g}})),A.forEach(function(e){var t=e.el;t.style.top=e.relativeTopStyle,t.style.left=e.left+"px",e.baseClass=t.className+=" waterfall-frame-"+g+" "+T,t.className+=" "+e.state}),l=A[0].top,t.isBiWaterfall){if(a=S.length){for(;j<a;){if(c=S[j],c.frame>g){s=j;break}j+=c.boxLen}s=void 0===s?a:s}else s=0;S.splice.apply(S,[s,0].concat(A))}else!S.length||S[S.length-1].top<=l?this._boxes=S.concat(A):this._boxes=A.concat(S);r=F(b).max,(!this._curTop||r>this._curTop)&&this.$el.height(this._curTop=r),this._cols=b.map(function(e,t){var i=this[t];return{min:e.min<i.min?e.min:i.min,max:e.max>i.max?e.max:i.max,left:e.left,frame:g}},this._cols)}function c(e){return e.checkTimes=1,function t(){setTimeout(function(){e.checkTimes++<O&&(e.initTopOffset=e.$el.offset().top,t())},j*e.checkTimes)}}function d(e){var t,i,n,o=e.colGap,a=4;if(o!==o)return console.error(o+" is not a valid number.");if("number"==typeof o)e.colGapT=e.colGapR=e.colGapB=e.colGapL=o;else{if(t=String(o).split(" "),0==(i=t.length)||i>4)return console.error(o+"'s format is not right.");for(;a--;)if(void 0!==(n=t[a])){if(isNaN(n=+n))return console.error(o+" contains invalid number.");t[a]=n}switch(i){case 1:e.colGapT=e.colGapR=e.colGapB=e.colGapL=t[0];break;case 2:e.colGapT=e.colGapB=t[0],e.colGapR=e.colGapL=t[1];break;case 3:e.colGapT=t[0],e.colGapR=e.colGapL=t[1],e.colGapB=t[2];break;case 4:e.colGapT=t[0],e.colGapR=t[1],e.colGapB=t[2],e.colGapL=t[3]}}}function u(e){this._config=e,this._currentAjax=null,this._id=w++,this._boxes=[],this._frames={loaded:{},cur:0,max:0,min:0},this.init()}i(7);var f=i(0),h=document,p=window,m=$(h),g=$(p),v=g.height(),x=$("<div></div>"),w=1,y=!1,b=".",_="waterfall-optimise-show",k="waterfall-optimise-hide",C=function(){return!0},T="waterfall-box",I="NORMAL",S={NORMAL:I,REVERSE:"REVERSE",SHOW:_,HIDE:k,FORCE_CHECK:"waterfall-force-check",EVENT_CLEAR_BACKUP:"waterfall-clear-backup"},A=v/2,j=1e3,O=6,L=0,E={el:".goods-wall",tmpl:"posterWall",type:"get",dataType:"json",data:{offset:0,frame:0,trace:0,limit:10,endId:0},dataName:"tInfo",layoutDirection:I,colGap:8,hasSideGap:!1,isEqualHeight:!1,canFetch:s,dataHandler:a,dataFilter:r,onBeforeFetch:C,onFetchStart:C,onFetchFinished:C,onFetchSuccess:C,onFetchError:C,onLayoutFinished:C,onDataEmpty:C,optimise:null},B=n(function(e,t){return e.max-t.max}),F=n(function(e,t){return t.max-e.max}),z=n(function(e,t){return t.min-e.min}),H=[],D=0,G=0,N=function(){return p.console?function(e){console.log(e)}:C}();!function(){if(!p.$$AddExtraStyle){p.$$AddExtraStyle=!0;var e=$('<style id="waterfall-optimise-style">.'+_+"{display:block;}."+k+"{display:none;}.waterfall-container{position:relative;}."+T+"{position:absolute;}</style>").appendTo("head");try{e.append(h.createTextNode(""))}catch(e){}}}(),u.prototype={constructor:u,init:function(){var e,t,i,n,o,a,r=this._config,s=r.colNum,l=r.hasSideGap,u=0,f=0,h=0;if(n=this.$el=r.$el=$(r.el),1!==n.length)throw Error("el 参数指定的 DOM 元素"+(n.length?"存在多个":"不存在")+", 请仔细检查 el 值。");if(n.addClass("waterfall-container"),this._cols=o=[],this._colsHistory=[],r.initTopOffset=n.offset().top,r.isFirstFrame=!0,c(r)(),d(r),e=r.colGapL,t=r.colGapR,i=t,l&&(f=2*e),!s||s<=0)throw Error("请传入 colNum");for(a=r.colWidth=Math.floor((n.width()-f-(s-1)*i)/s);u<s;u++)0==u?h=l?e:0:h+=a+i,o.push({min:0,max:0,left:h,frame:0});(r.useOptimise=!!r.optimiseFn)&&(this.bindTouchmoveEvent(),r.optimiseFn.initRange(s))},bindTouchmoveEvent:function(){var e,t,i,n=this,o=n._config,a="."+n._id;e=o.touchMoveEventName="touchmove.waterfall"+a,t=o.touchEndEventName="touchend.waterfall"+a,m.on(e,function(){o.hasMoved=!0,m.triggerHandler(t)}).on(t,function(){!n._isLock&&o.hasMoved&&o.optimiseFn.optimise(n._boxes,g.scrollTop()-o.initTopOffset),o.hasMoved=!1}),g.on("scroll.waterfall",function(){clearTimeout(i),i=setTimeout(function(){o.optimiseFn.optimise(n._boxes,g.scrollTop()-o.initTopOffset)},30)})},fetch:function(e){function t(e,t){a.onFetchFinished.call(o,e,t),o._isLoading=!1}function i(e){var t=o._frames,i=r.frame,n=e;a.rawData=n,e=a.dataFilter.call(o,e),o._isLock||e&&e.length||(o.lock(),a.onDataEmpty.call(o,a)),!o._isLock&&n&&n.data&&n.data.endId&&(-1===n.data.endId?(o.lock(),a.onDataEmpty.call(o,a)):r.endId=n.data.endId),a.onFetchSuccess.call(o,e,a),a.dataHandler.call(o,e,a),t.loaded[r.frame]=1,t.max<i&&(t.max=i),t.min>i&&(t.min=i),a.layoutDirection==I?r.frame++:r.frame--,r.trace=e?e.trace||0:0}function n(e,t,i){o._isLoading=!1,a.onFetchError.call(o,i,t)}var o=this,a=o._config,r=a.data;if(!o._isLoading)return o._isLoading=!0,!1===a.onBeforeFetch.call(o,a)?void(o._isLoading=!1):(o._config.onFetchStart.call(o,a),this.isFrameLoaded(a.data.frame)?void(o._isLoading=!1):e?void setTimeout(function(){t(null,200),i(e)},0):void(this._currentAjax=$.ajax({type:a.type,dataType:a.dataType,data:r,url:a.url,success:i,error:n,complete:t})))},start:function(e){return this.fetch(e),this},lock:function(){return this._isLock=!0,this},isLoading:function(){return this._isLoading},getColsInfo:function(){return $.extend(!0,[],this._cols)},getColsHistoryInfo:function(){return $.extend(!0,[],this._colsHistory)},setColsHistoryInfo:function(e){return this._colsHistory=$.extend(!0,[],e),this},setColsInfo:function(e){return e&&e.length&&(this._cols=$.extend(!0,[],e)),this},getParam:function(e){return this._config[e]},updateParam:function(e,t){return this._config[e]=t,this},increaseDataParam:function(e){var t=this._config.data,i=+t[e];isNaN(i)?t[e]=0:t[e]=i+1},getDataByPath:o,updateLayoutDirection:function(e){if(!(e in S))throw Error(e+" is not a valid direction.");return this._config.layoutDirection=e,this},findLowestCol:function(){return z(this._cols)},findHighestCol:function(){return F(this._cols)},isFrameLoaded:function(e){return!!this._frames.loaded[e]},getCurrentFrame:function(){return this._config.data.frame},unlock:function(){return this._isLock=!1,this},destroy:function(){for(var e=D;e--;)H[e]._id===this._id&&(this._currentAjax&&(this._currentAjax.abort(),this._currentAjax=null),H.splice(e,1),D--)},resetCurTop:function(){return this._boxes._curTop=-9999,this},triggerScroll:function(e){return g.triggerHandler("scroll.waterfall",[e||"down"]),this}},g.on("scroll.waterfall",function(e,t){var i,n,o;D&&(n=g.scrollTop(),n||y?y=!1:(y=!0,clearTimeout(L),L=setTimeout(function(){o=!0,g.trigger("scroll.waterfall")},10)),i="down"==t||"up"!=t&&n>=G,G=n,H.forEach(function(e){e._isLock||!0===e._config.canFetch.call(e,n,i)&&(e.fetch(),o&&e.resetCurTop())}))}),t.CONS=S,t.init=function(e){var t,i,n,o;if(e=$.extend(!0,{_totalIndex:0},E,e),"string"==typeof e.dataName&&(e._dataName=e.dataName.split(".")),i=e.plugins){if(Array.isArray(i)&&i.some(function(e,t){return e.takeOver&&(o=t,1)}))return n=e.plugins.splice(o,1)[0],n.init(e);if(i.takeOver)return delete e.plugins,i.init(e)}return H.push(t=new u(e)),D++,i&&i.forEach(function(e){e.init(t)}),t}},function(e,t){function i(e){return"none"!=e.css("display")&&"hidden"!=e.css("visibility")&&0!=e.css("opacity")&&e.width()&&(e.height()||e.innerHeight&&e.innerHeight())}function n(e){var t=e.offset().top,n=e.height()||e.innerHeight&&e.innerHeight(),o=e.offset().left,a=e.width(),r=$(window).scrollTop(),s=$(window).scrollLeft(),l=$(window).width(),c=$(window).height(),d=t>=r&&t<r+c,u=t+n>r&&t+n<=r+c,f=t<r&&t+n>r+c,h=o>=s&&o<s+l,p=o+a>s&&o+a<=s+l,m=o<s&&o+a>s+l;return i(e)&&(d||u||f)&&(h||p||m)}function o(){if(p.length||g.length||v.length||x.length||m){!function(){g&&g.length?(b("0x00000000",{acms:g,indexs:u,type:5}),u=[],g=[]):v&&v.length?(b("0x00000000",{acms:v,indexs:f,type:5}),f=[],v=[]):x&&x.length?(b("70500",{acms:x,indexs:h,iids:w,type:4}),w=[],h=[],x=[]):m?(b(d||70500,m),m=null,d=null):p&&p.length&&(b(d||70500,{acms:p,iids:w,indexs:y}),p=[],w=[],y=[],d=null)}()}a=!0,window.setTimeout(function(){p.length||g.length||v.length||x.length||m?o():a=!1},1e3)}var a=!1,r="has-log-mod",s="data-log-content",l="data-log-iid",c="data-log-index",d=($(".rec-show-log"),null),u=[],f=[],h=[],p=[],m=null,g=[],v=[],x=[],w=[],y=[],b=function(e,t){var i=window&&window.logger&&window.logger.log;i&&i(e,t)},_=function(e){var t=e.attr(s),i=t.split(";");$(i).each(function(e,t){var i=t.split("="),n=i[0];n&&(m=m||{},m[n]=m[n]||[],m[n].push(t.replace(n+"=","")))})},k=function(){$(".module_row").each(function(e,t){var i=$(t),o=i.attr("data-acm")||"",a=o.split(".");if(o&&n(i)){var s=i.find(".cube-acm-node,.anchor"),c=s.length;i.hasClass(r)||(g.push(o+"-mfs_"+c),u.push(e),i.addClass(r)),c&&$(s).each(function(e,t){var i=$(t),s=!i.hasClass("log-custom")&&i.attr("data-log-content")||"",d=i.attr(l)||"";!i.hasClass(r)&&n(i)&&(s&&a[6]?(x.push(s+"-"+a[6]+"-idx_"+e+"-mfs_"+c),h.push(e),d&&w.push(d),i.addClass(r)):(v.push(o+"-idx_"+e+"-mfs_"+c),f.push(e),i.addClass(r)))})}}),$(".rec-show-log").each(function(e,t){if(n($(t))||$(t).hasClass("waiting-log")){var i=$(t).find(".show-log-item");$(t).removeClass("waiting-log"),i.length?$(i).each(function(e,i){var o=$(i);if(n(o)||o.hasClass("waiting-log")){if(o.removeClass("waiting-log"),d&&d!==$(t).data("eventid"))return $(t).addClass("waiting-log"),void o.addClass("waiting-log");o.hasClass("log-custom")?_(o):(null!==o.attr(c)&&""!==o.attr(c)&&void 0!==o.attr(c)&&y.push(o.attr(c)),o.attr(s)&&p.push(o.attr(s)),o.attr(l)&&w.push(o.attr(l))),d=$(t).data("eventid"),o.removeClass("log-custom").removeClass("show-log-item").removeAttr(s).removeAttr(l).removeAttr(c)}}):$(t).removeClass("rec-show-log")}}),(p.length||g.length||v.length||x.length||m)&&!a&&o()};!function(){$(window).scroll(k),$(window).trigger("scroll")}(),t.log=k},function(e,t){function i(e){var t=e.match(/(\d+)x(\d+).([a-zA-Z0-9]*)$/);return t&&t.length>0&&t[1]&&t[2]&&t[3]?{w:t[1],h:t[2],ext:t[3]}:null}function n(e){if(!e||e.indexOf(".webp")>0||e.indexOf(".gif")>0||e.indexOf(".jpg")<0&&e.indexOf(".png")<0||e.indexOf(".jpg_")>0||e.indexOf(".png_")>0)return e;if(e){var t=e.match(/\d+x\d+.[a-zA-Z0-9]*!/g);if(t&&t.length>0&&t.length<2){var i=e.match(/\.([a-zA-Z0-9]+)$/);if(i&&i.length)return e+"_999x999.v1c0.50"+i[0]}}return e}function o(e,t,i){var n=t.attr("suffix-model"),o="",a="."+e._imgQuality+".";switch("no"===t.attr("add-quality")&&(a="."),n){case"add_code":o=$.trim(t.attr("suffix-code"));break;case"orig_narrow":s.devicePixelRatio<2&&(o="50000x50000.v1c7E");break;case"goods_dpr":o=r(e,t);break;default:return i}if(t.attr("suffix-model","end"),!i||!o||i.indexOf(".webp")>0||i.indexOf(".gif")>0)return i;if(o="_"+o,i.indexOf(".jpg")<0&&i.indexOf(".png")<0)return i;if(i.indexOf(".jpg_")>0||i.indexOf(".png_")>0)return i;var l="",c=i.split(".");if("jpg"==c[c.length-1])l="jpg";else{if("png"!=c[c.length-1])return i;l="png"}return i+o+a+l}function a(e,t){var i="_999x999.v1c0.",n=e._bodyWidth,o="."+e._imgQuality+".";if(0<n&&n<=375?i="_375x999.v1c7E"+o:375<n&&n<=750?i="_750x999.v1c7E"+o:750<n&&n<=1125&&(i="_1125x9999.v1c7E"+o),!t||t.indexOf(".webp")>0||t.indexOf(".gif")>0)return t;if(t.indexOf(".jpg")<0&&t.indexOf(".png")<0)return t;var a="",r=t.split(".");if("jpg"==r[r.length-1])a="jpg";else{if("png"!=r[r.length-1])return t;a="png"}return t.indexOf(".png_")<0&&t.indexOf(".jpg_")<0&&t.indexOf("."+a)==t.length-4&&(t+=i+a),l&&t.indexOf(".jpg_")>0&&(r=t.split("."),"jpg"==r[r.length-1])?(r[r.length-1]="webp",r.join(".")):t}function r(e,t){var i="",n=".v1cAC";switch(t.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":i=t.attr("suffix-ratio");break;default:i=e._dprDefRatio,n=".v1c96"}var o=parseInt(t.attr("suffix-width")||t[0].offsetWidth)*e._dpr;(!o||o<0||o>e._dprDefMaxWidth)&&(o=e._dprDefMaxWidth);for(var a=0;a<h.length;a++){var r=h[a];if(o<=r||r==e._dprDefMaxWidth)return p[r][i]+n}return!1}var s=window,l=!1,c=!1,d=[],u=s.devicePixelRatio>=1?s.devicePixelRatio:1,f={_imgQuality:70,_dpr:u,_bodyWidth:s.innerWidth*u,_dprDefMaxWidth:640,_dprDefRatio:"999"},h=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],p={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}};!function(){var e,t=function(){c=!0,d.forEach(function(e){e&&e()})};try{e=localStorage.getItem("js:is-support-webp")}catch(e){fml.debug("获取 storage_key 失败")}if("string"==typeof e)return l="true"===e,void t();var i=new Image;i.onload=i.onerror=function(e){l="load"===e.type&&1===i.width;try{localStorage.setItem("js:is-support-webp",l)}catch(e){fml.debug("设置 storage_key 失败")}t()},i.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}(),t.parseImgSrc=function(e,t){if(!e)return"about:blank";var r=i(e);return-1===e.indexOf("mogucdn")?e:(e=o(f,t,e),r&&r.w>750&&(e=n(e)),a(f,e))},t.ready=function(e){e&&(c?e():d.push(e))}},function(e,t){function i(e,t,i){if(i&&checkTemplate(e,t),!n[e]){var o=document.getElementById(e).innerHTML;o=o.replace(/[\r\t\n]/g," ").split("<?").join("\t").replace(/((^|\?>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\?>/g,"',$1,'").split("\t").join("');").split("?>").join(";p.push('").split("\r").join("\\'");try{n[e]=new Function("","var p=[];p.push('"+o+"');return p.join('');")}catch(e){if(console){console.log(e);var a=o.replace(/^[ ]*\'\)|p.push\(\'[ ]*\'\)|p.push\(\'/g,"").replace(/^[ ]*;|;[ ]*$/g,"");console.log(e.message+"   :   "+a);var r=document.createElement("script");r.innerHTML=a;try{new Function("",a)}catch(e){}}}}var s=n[e];if(!t)return s;try{return s.apply(t)}catch(e){console&&(console.log(e),console.log(t))}}var n={};e.exports=i},function(e,t,i){function n(e){m.show(),m.find(".js-act-fix-left-banner").html('<a href="'+e[0].link+'" target="_blank"><img src="'+e[0].image+'" /></a>');var t=m.find(".act_left_box");t.css("top",h.height()-(t.height()+20)),m.find(".left_ad_close").on("click",function(){t.hide()})}function o(e){e=e.slice(0,6),$("#pop").show().find(".js-list").html(l("tmpl-pop",e))}function a(e){f.getCookie(w)||setTimeout(function(){var t=l("tmpl-promotion-ad",{promotion:e});c.meiliDialog({showHeader:!1,dialogContent:t,onClose:function(){f.setCookie(w,"show",{duration:x})}})},1e3)}function r(){var e=1,t={pid:b,page:e},i=d.init({el:".js-wall",tmpl:"tmpl-waterfall",url:"http://mce.meilishuo.com/jsonp/get/3",dataType:"jsonp",colNum:5,colGap:"20 20 0 0",hasSideGap:!0,isEqualHeight:!0,data:t,dataFilter:function(t){return e+=1,this._config.data.page=e,"data.list".split(".").forEach(function(e){t=t[e]}),t},onFetchSuccess:function(){i.getParam("rawData").data.isEnd&&(k.attr("status","stop").hide(),this.lock())},onFetchFinished:function(e,t){"success"==t&&s.load(".beauty_poster")}});return i}i(1);var s=i(4),l=i(0),c=i(2),d=i(6),u=i(5),f=i(3),h=$(window),p=$("#banner"),m=$("#global-act-left"),g=+$(".top-wrap").data("now"),v="active",x=345600,w="index-ad-last-showed-time",y=s.init({root:".top-wrap"});s.load("#banner"),s.load(".channels",{bgSize:"contain"});var b,_=$("#beauty"),k=_.find(".pullUp"),C=p.find("a");C.on("click",function(){var e=$(this),t={url:e.attr("href"),refer:document.referrer,index:C.index(e),bannerid:"",bannername:e.attr("name")};logger&&logger.log("000815001",t)}),function(){var e=p.find("li").length;e>1?p.imageSlide({evt:1,effect:1,autoTime:3e3}):e||p.find(".banner").append('<li class="data-ptp-item " data-ptp-customc="indexbanner_mls_ _美丽优选T裇" ><a class="pic lazyload-placeholder no-cdn-compress" name="美丽优选T裇" href="http://s.meilishuo.com/1172jnw8/list/index?categoryId=20160580" target="_blank" data-src="http://s2.mogucdn.com/mlcdn/c45406/170329_407g0k6lce0b3h78ddjg9dd39eh33_2400x800.jpg"></a></li>')}(),function(){function e(e){var i=o[e];if(t!==i&&(t&&(t.$link.removeClass(v),t.$content.hide()),t=i,t.$link.addClass(v),t.$content.show(),!i.isLoading)){if(i.isLoaded)return t&&t.$content.hide(),void i.$content.show();i.isLoading=!0,i.$content.addClass(r),$.ajax({url:a,dataType:"jsonp",data:{type:i.type,cid:i.type,offset:0,limit:20}}).done(function(e){var t;t=e&&e.data&&e.data.rows?e.data.rows.slice(0,10):{empty:!0},i.isLoaded=!0,i.isLoading=!1,i.$content.removeClass(r).html(l("tmpl-top-goods",{list:t})),y.check();var o=i.$content.height();n.height()<o&&n.height(o)})}}var t,i=$("#top-goods"),n=i.find(".content-wrap"),o={today:{type:"mrsx",$link:i.find('[data-type="today"]'),$content:i.find(".js-top-goods-today")},week:{type:"yzrx",$link:i.find('[data-type="week"]'),$content:i.find(".js-top-goods-week")}},a="http://simba-api.meilishuo.com/mlselection/top/v1/topGoodsList/h5",r="loading";e("today"),i.find(".js-link").on("click",function(){e($(this).data("type"))})}(),function(){$.ajax({url:"http://simba-api.meilishuo.com/venus/topic/v2/queryTopicList/pc",dataType:"jsonp"}).then(function(e){if(e&&e.data&&e.data.length){var t=$("#select"),i=e.data.slice(0,3);t.show().find(".js-content").addClass("item-num-"+i.length).html(l("tmpl-select",i))}})}(),function(){u.get({id:"26489"}).then(function(e){e&&e.forEach(function(e){g>=1e3*e.stime&&g<=1e3*e.etime&&(b=e.pid)}),b&&(_.show(),r().start())})}(),u.get({id:{leftAd:"15477",pop:"39800",promotionAd:"15476"}}).then(function(e){e.leftAd&&e.leftAd.length&&n(e.leftAd),e.pop&&e.pop.length&&o(e.pop),e.promotionAd&&e.promotionAd.length&&a(e.promotionAd)})}]);;