!function(){window.$&&window.require&&(window.modJsRequire=function(e,n,t,i){"function"==typeof n&&(t=arguments[1],i=arguments[2],n=null),require(e,function(){var e=Array.from?Array.from(arguments):Array.prototype.slice.call(arguments),i=this;n&&$(n).length?$(n).each(function(n,o){t&&t.apply(i,e.concat([o,n]))}):t&&t.apply(this,e)},i)})}(),define("core/core",[],function(){return window.MoGu={Config:{debug:"@DEBUG@"},version:"undefined@",appEnv:"Env",data:{},widget:{},_global:{}},MoGu}),define("core/evoke",["core/core"],function(e){function n(e){this.options={opentype:"index",param:null,downUrl:"http://a.app.qq.com/o/simple.jsp?pkgname=com.mogujie&g_f=991699"},this.ua=null,this.src=null,this.merge(e),this.getUA(),this.getSrc(),this.evoke()}return n.prototype={merge:function(e){if("object"!=typeof e)return!1;var n=this.options;for(var t in n)("object"==typeof e[t]||e[t])&&(n[t]=e[t])},getUA:function(){var e=navigator.userAgent.toLowerCase(),n=this;n.ua={mobile:!!e.match(/applewebKit.*mobile.*/),ios:!!e.match(/\(i[^;]+;( u;)? cpu.+mac os x/),chrome:e.indexOf("chrome")>-1,isVessel:e.indexOf("mogujie")>-1,isNative:e.indexOf("mogujie")>-1&&-1==e.indexOf("nonative")}},evoke:function(){var e=this;e.ua.isNative?window.location.href="mgj://"+e.src:e.ua.ios?e.iosEvoke():e.ua.chrome?e.androidChrome():e.androidNotChrome()},iosEvoke:function(){var e=this,n=new Date;return window.setTimeout(function(){var t=new Date;5e3>t-n&&"object"!=typeof e.options.downUrl?window.location=e.options.downUrl:window.close()},25),"object"==typeof e.options.downUrl?!1:void(window.location="mogujie://open?url="+encodeURIComponent("mgj://"+e.src))},androidNotChrome:function(){var e=this,n="mogujie://index?url="+encodeURIComponent("mgj://"+e.src),t=document.createElement("iframe");return t.src=n,t.style.display="none",document.body.appendChild(t),"object"==typeof e.options.downUrl?!1:void(window.location=e.options.downUrl)},androidChrome:function(){var e=this,n="intent://index?url="+e.src+"#Intent;scheme=mogujie;package=com.mogujie;end",t=document.createElement("a");return t.href=n,t.style.display="none",document.body.appendChild(t),setTimeout(function(){t.click()},1e3),"object"==typeof e.options.downUrl?!1:void(window.href=e.options.downUrl)},getSrc:function(){var e=this,n=e.options.param,t="";if(n&&"object"==typeof n)for(var i in n)t=t?t+"&":"?"+t,t=t+i+"="+n[i];e.src=e.options.opentype+t}},e.Evoke=n,e}),define("core/const",["core/core"],function(e){return e.Const={},e}),define("core/polyfill",["core/core"],function(e){return function(){for(var e=0,n=["ms","moz","webkit","o"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,t){var i=+new Date,o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){n(i+o)},o);return e=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),e}),define("core/ua",["core/core"],function(e){return $.extend(e,{ua:function(){var n=navigator.userAgent.toLowerCase(),t={};return t["native"]=n.indexOf("meilishuo")>-1,t.wechat=n.indexOf("micromessenger")>-1,t["native"]&&window.mgj&&mgj.device&&mgj.device.getInfo(function(n){e&&e.ua&&$.extend(e.ua,{appInfo:n})}),$.os?t=$.extend(!0,t,$.os):t.phone=!1,t}()}),e}),define("core/error",["core/core","core/ua"],function(e){return $.extend(e,{error:function(n){if(console&&console.log(n),e.ua["native"]&&window.MOGU_DEV){var t=$("#notice_error");t.length||(t=$('<div id="notice_error"></div>').prependTo($("body"))),t.prepend("<p>"+n+"</p>")}}}),e}),define("fnExtend",["core/core"],function(e){var n=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},t=function(e,n){return void 0===n?e:function(){return e.apply(n,arguments)}},i=function(e,n,i){return null==e?e||null:$.isFunction(e)?t(e,n,i):function(n){return n[e]}};return{parseJson:JSON.parse,escapeHtml:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},formatPrice:function(e){return null==e?"-":(e/100).toFixed(2)},formatDate:function(e,n){var t,i,o=this,r=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],a=/\\?(.?)/gi,u=function(e,n){return i[e]?i[e]():n},s=function(e,n){for(e=String(e);e.length<n;)e="0"+e;return e};return i={d:function(){return s(i.j(),2)},D:function(){return i.l().slice(0,3)},j:function(){return t.getDate()},l:function(){return r[i.w()]+"day"},N:function(){return i.w()||7},S:function(){var e=i.j(),n=e%10;return 3>=n&&1==parseInt(e%100/10,10)&&(n=0),["st","nd","rd"][n-1]||"th"},w:function(){return t.getDay()},z:function(){var e=new Date(i.Y(),i.n()-1,i.j()),n=new Date(i.Y(),0,1);return Math.round((e-n)/864e5)},W:function(){var e=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),n=new Date(e.getFullYear(),0,4);return s(1+Math.round((e-n)/864e5/7),2)},F:function(){return r[6+i.n()]},m:function(){return s(i.n(),2)},M:function(){return i.F().slice(0,3)},n:function(){return t.getMonth()+1},t:function(){return new Date(i.Y(),i.n(),0).getDate()},L:function(){var e=i.Y();return e%4===0&e%100!==0|e%400===0},o:function(){var e=i.n(),n=i.W(),t=i.Y();return t+(12===e&&9>n?1:1===e&&n>9?-1:0)},Y:function(){return t.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return t.getHours()>11?"pm":"am"},A:function(){return i.a().toUpperCase()},B:function(){var e=3600*t.getUTCHours(),n=60*t.getUTCMinutes(),i=t.getUTCSeconds();return s(Math.floor((e+n+i+3600)/86.4)%1e3,3)},g:function(){return i.G()%12||12},G:function(){return t.getHours()},h:function(){return s(i.g(),2)},H:function(){return s(i.G(),2)},i:function(){return s(t.getMinutes(),2)},s:function(){return s(t.getSeconds(),2)},u:function(){return s(1e3*t.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var e=new Date(i.Y(),0),n=Date.UTC(i.Y(),0),t=new Date(i.Y(),6),o=Date.UTC(i.Y(),6);return e-n!==t-o?1:0},O:function(){var e=t.getTimezoneOffset(),n=Math.abs(e);return(e>0?"-":"+")+s(100*Math.floor(n/60)+n%60,4)},P:function(){var e=i.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-t.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(a,u)},r:function(){return"D, d M Y H:i:s O".replace(a,u)},U:function(){return t/1e3|0}},this.date=function(e,n){return o=this,t=void 0===n?new Date:n instanceof Date?new Date(n):new Date(1e3*n),e.replace(a,u)},this.date(e,n)},has:function(e,n){return null!=e&&e.hasOwnProperty(n)},keys:function(e){var t=Object.keys;if(!n(e))return[];if(t)return t(e);var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(o);return i},values:function(e){var n=this.keys(e);return n.map(function(n){return e[n]})},map:function(e,n,t){if(null==e)return[];n=i(n,t);var o,r,a=e.length;a!==+a&&(r=this.keys(e),a=r.length);for(var u=new Array(a),s=0;a>s;s++)o=r?r[s]:s,u[s]=n(e[o],o,e);return u},now:function(){return+Date.now()||+new Date},throttle:function(e,n,t){var i,o,r,a=this,u=null,s=0;t||(t={});var c=function(){s=t.leading===!1?0:a.now(),u=null,r=e.apply(i,o),u||(i=o=null)};return function(){var f=a.now();s||t.leading!==!1||(s=f);var d=n-(f-s);return i=this,o=arguments,0>=d||d>n?(clearTimeout(u),u=null,s=f,r=e.apply(i,o),u||(i=o=null)):u||t.trailing===!1||(u=setTimeout(c,d)),r}},debounce:function(e,n,t){var i,o,r,a,u,s=this,c=function(){var f=s.now()-a;n>f&&f>0?i=setTimeout(c,n-f):(i=null,t||(u=e.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,a=s.now();var f=t&&!i;return i||(i=setTimeout(c,n)),f&&(u=e.apply(r,o),r=o=null),u}},login:function(n){n=n||location.href,e.ua["native"]&&"object"==typeof mgj?location.href="mls://login":location.href="http://m.meilishuo.com/user/login"},parseUrl:function(e,n){return{}},toFixed:function(e,n){var t,i=0;n=n||2;var o=Math.pow(10,n||0);t=String(Math.round(e*o)/o);var r=t.split(".")[1];r?i=r.length:n!=i&&(t+=".");for(var a=0;n-i>a;a++)t+="0";return t},formatTime:function(e,n){var t=new Date(parseInt(1e3*e));n=n||"YY-MM-DD";var i=t.getFullYear(),o=parseInt(t.getMonth()),r=parseInt(t.getDate()),a=i,u=o>8?o+1:"0"+(o+1),s=r>9?r:"0"+r;return n.replace(/YY/i,a).replace(/MM/i,u).replace(/DD/i,s)}}}),define("fn/fn",["core/core","fnExtend"],function(e,n){return e.fn={set:function(n,t){e._global[n]&&e.error(n+"包将被替换"),e._global[n]=t},get:function(n){return e._global[n]||!1},getQueryString:function(e,n){n=n||location.href,n=n.split("#")[0];var t=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return t.test(n)?RegExp.$2.replace(/\+/g," "):""},setCookie:function(e,n,t){t=t||{},null===n&&(n="",t.expires=-1);var i="";if(t.expires&&("number"==typeof t.expires||t.expires.toUTCString)){var o;"number"==typeof t.expires?(o=new Date,o.setTime(o.getTime()+864e5*t.expires)):o=t.expires,i="; expires="+o.toUTCString()}var r=t.path?"; path="+t.path:"",a=t.secure?"; secure":"",u="";t.domain?u="; domain="+t.domain:(u=document.domain.toString().split("."),u="; domain=."+u[1]+"."+u[2]),document.cookie=[e,"=",encodeURIComponent(n),i,r,u,a].join("")},getCookie:function(e){var n=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==n?decodeURIComponent(n[2]):""},removeCookie:function(n){e.util.setCookie(n,null,{expires:-1})},idtourl:function(e){return e?1+(2*e+56).toString(36):void 0},urltoid:function(e){return(parseInt(e.substring(1),36)-56)/2},walkThrough:function(e,n){n=n||window;var t=(e||"").split("."),i=!!t.length;return $(t).each(function(e,t){return i=i&&null!==n[t]&&void 0!==n[t],i===!1?i:void(n=n[t])}),i},cAjax:function(e){return $.ajax(e)}},$.extend(e.fn,n),e}),define("uiExtend",[],function(){function e(){t.css("display","block")}function n(){t.css("display","none")}var t=$("#M_Loading");return{showMask:function(e){e=e||$("#M_Mask"),e.show()},hideMask:function(e){e=e||$("#M_Mask"),e.hide()},showLoading:function(){MoGu.ua["native"]?"undefined"!=typeof mgj&&mgj.progress?(MoGu.ui.showLoading=mgj.progress.show,n(),mgj.progress.show()):e():(e(),MoGu.ui.showLoading=e)},hideLoading:function(){n(),MoGu.ua["native"]?"undefined"!=typeof mgj&&mgj.progress&&(MoGu.ui.hideLoading=mgj.progress.hide,mgj.progress.hide()):MoGu.ui.hideLoading=n},initRem:function(e){e=+e||100;var n=window.document.documentElement,t=Math.min(n.clientWidth,750);n.style.fontSize=t/(750/e)+"px"}}}),define("lib/doT",[],function(){function e(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(n,function(n){return e[n]||n}):this}}function n(e,t,i){return("string"==typeof t?t:t.toString()).replace(e.define||r,function(n,t,o,r){return 0===t.indexOf("def.")&&(t=t.substring(4)),t in i||(":"===o?(e.defineParams&&r.replace(e.defineParams,function(e,n,o){i[t]={arg:n,text:o}}),t in i||(i[t]=r)):new Function("def","def['"+t+"']="+r)(i)),""}).replace(e.use||r,function(t,o){e.useParams&&(o=o.replace(e.useParams,function(e,n,t,o){if(i[t]&&i[t].arg&&o){var r=(t+":"+o).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[r]=i[t].text.replace(new RegExp("(^|[^\\w$])"+i[t].arg+"([^\\w$])","g"),"$1"+o+"$2"),n+"def.__exp['"+r+"']"}}));var r=new Function("def","return "+o)(i);return r?n(e,r,i):r})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var i={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};String.prototype.encodeHTML=e();var o={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},r=/$^/;return i.template=function(a,u,s){u=u||i.templateSettings;var c,f,d=u.append?o.append:o.split,l=0,g=u.use||u.define?n(u,a,s||{}):a;g=("var out='"+(u.strip?g.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):g).replace(/'|\\/g,"\\$&").replace(u.interpolate||r,function(e,n){return d.start+t(n)+d.end}).replace(u.encode||r,function(e,n){return c=!0,d.start+t(n)+d.endencode}).replace(u.conditional||r,function(e,n,i){return n?i?"';}else if("+t(i)+"){out+='":"';}else{out+='":i?"';if("+t(i)+"){out+='":"';}out+='"}).replace(u.iterate||r,function(e,n,i,o){return n?(l+=1,f=o||"i"+l,n=t(n),"';var arr"+l+"="+n+";if(arr"+l+"){var "+i+","+f+"=-1,l"+l+"=arr"+l+".length-1;while("+f+"<l"+l+"){"+i+"=arr"+l+"["+f+"+=1];out+='"):"';} } out+='"}).replace(u.evaluate||r,function(e,n){return"';"+t(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),c&&u.selfcontained&&(g="String.prototype.encodeHTML=("+e.toString()+"());"+g);try{return new Function(u.varname,g)}catch(p){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+g),p}},i.compile=function(e,n){return i.template(e,null,n)},i}),define("ui/ui",["uiExtend","lib/doT"],function(e,n){return MoGu.ui={jsMbSubstr:function(e,n){if(!e||!n)return"";var t=0,i=0,o="",r=e.length;for(i=0;r>i;i++){if(t=e.charCodeAt(i)>255?t+=2:++t,t>2*n)return o;o+=e.charAt(i)}return e},getPicExtension:function(e){var n=e.match(/.+\.(.+)$/);return n?n[1]:""},getTemplate:function(e,t){try{return n.template(e)(t)}catch(i){return i}},getdoT:function(){return n}},$.extend(MoGu.ui,e),MoGu}),define("ui/tips",["fn/fn"],function(e){"use strict";var n={duration:1500},t=function(e){var t=$.extend({},n,e);this.duration=t.duration,this.init()};t.prototype={init:function(){this.elem=$("#M_Tips"),this.elem.get(0)||(this.elem=$("<div id='M_Tips' class='ui-tips' style='display:none;'><span class='ui-tips-text'></span></div>"),this.elem.appendTo("body")),this.text=this.elem.find(".ui-tips-text")},show:function(e,n,t){var i=this;i.elem.show(),e&&"string"==typeof e&&i.text.html(e).removeClass("fadeOut").addClass("fadeIn"),isNaN(n)&&!$.isFunction(t)&&t!==!1&&(t=n,n=i.duration),0!=n&&i.hide(n,t)},hide:function(e,n){var t=this,i=null;i=setTimeout(function(){t.text.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t.elem.hide(),n&&n()},500)},e||t.duration)}},e.fn.set("tip",t);var i=new t;return i}),define("core/cube/app",["core/ua","fn/fn"],function(e){function n(n,t){e.ua["native"]&&(t=t||$("body"),t.on("click",n,function(e){var n=$(this),t=n.attr("href");if(!(t.indexOf("http://")<0&&t.indexOf("https://")<0||t.indexOf("mgj://")>=0||t.indexOf("javascript")>=0))return t=logger&&logger.generatePtpParams(t)||t,window.mgj&&mgj.navigation&&mgj.navigation.pushWindow?(mgj.navigation.pushWindow(t),!1):window.mgj?(window.location.href="mgj://web?url="+encodeURIComponent(t),!1):void 0}))}function t(){if(!e.ua["native"])return-1;var n=new RegExp("(^|[?]|&)_av=([0-9]{3})","i"),t=window.location.search.match(n);if(t&&t[2]>400)return parseInt(t[2]);var i=window.navigator.userAgent,o="",r="";return $.os.iphone&&(o=new RegExp("(mogujie4iphone).*/([0-9]{3})","i"),r=i.match(o),r&&r[2]>400)?parseInt(r[2]):$.os.android&&(o=new RegExp("(mogujie4android).*/([0-9]{3})","i"),r=i.match(o),r&&r[2]>400)?parseInt(r[2]):void 0}function i(e){document.addEventListener("deviceready",function(){return window.mgj&&mgj.device&&mgj.device.getInfo?void mgj.device.getInfo(function(n){"string"==typeof n&&(n=JSON.parse(n)),e(+n.appVersion)},function(){e(-1)}):void e(-1)})}return $.extend(e.fn,{openLinkView:n,getAppVersion:t,getAppVersionAsync:i,platform:e.ua.phone?e.ua["native"]?"app":"wap":"pc"}),e}),define("core/cube/lazyload",["core/core"],function(){var e=(navigator.userAgent,!1),n=!1,t=function(e){var n=e.match(/(\d+)x(\d+).([a-zA-Z0-9]*)$/);return n&&n.length>0&&n[1]&&n[2]&&n[3]?{w:n[1],h:n[2],ext:n[3]}:null},i=function(e){if(!e||e.indexOf(".webp")>0||e.indexOf(".gif")>0)return e;if(e.indexOf(".jpg")<0&&e.indexOf(".png")<0)return e;if(e.indexOf(".jpg_")>0||e.indexOf(".png_")>0)return e;if(e){var n=e.match(/\d+x\d+.[a-zA-Z0-9]*/g);if(n&&n.length>0&&n.length<2){var t=e.match(/\.([a-zA-Z0-9]+)$/);if(t&&t.length)return e+"_999x999.v1c0.50"+t[0]}}return e},o=document.documentElement.clientHeight||document.body.clientHeight,r=document.documentElement.clientWidth||document.body.clientWidth;$(window).resize(function(){o=document.documentElement.clientHeight||document.body.clientHeight,r=document.documentElement.clientWidth||document.body.clientWidth});var a=function(e){e.$container=e.$container||$(document.body),this.opts=$.extend({},this.defaults,e),this.opts.imgsCache=[],this.opts.imgsRemoveCache=[],this.firstCheck=!1,this.imgQuality=70,this.imgKeyArr=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],this.imgKeyMap={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},this.dpr=window.devicePixelRatio>=1?window.devicePixelRatio:1,this.bodyWidth=r*this.dpr,this.dprDefMaxWidth=640,this.dprDefRatio="999",this.imgErrorClock={},this.init()};return a.prototype={defaults:{$scrollContainer:$(window),$container:$("body"),objsClassName:".J_dynamic_imagebox",objsWrapClass:".mod_row",objsLoadingClass:"J_loading",objsDataSrc:"img-src",objs3xDataSrc:"img-3x-src",showDistance:0,scrollThreshold:200},init:function(){var e=this,n=null;this.opts.$scrollContainer.on("scroll.globalScroll",function(t){clearTimeout(n),n=setTimeout(function(){e.checkImages()},e.scrollThreshold)}),this._initCheckWebp()},_initCheckWebp:function(){var n=new Image,t=this;n.onload=function(){e=!0,t._firstCheckImages()},n.onerror=function(){if($.os&&$.os.ios&&MoGu.ua["native"]){var n=MoGu.fn.getAppVersion();e=900==n?!0:!1}else e=!1;t._firstCheckImages()},n.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},_isValidViewElem:function(e){return"none"!=e.css("display")&&"hidden"!=e.css("visibility")&&0!=e.css("opacity")&&e.width()},_isInViewPort:function(e,n){var t=this._isValidViewElem(e);if(!t)return!1;var i,o,r,a,u=e[0],s=u.getBoundingClientRect&&u.getBoundingClientRect();s?(i=e.offset().top,o=i+e.height(),r=s.left,a=s.right):(i=e.offset().top,o=i+e.height(),r=e.offset().left,a=r+e.width());var c=o>n.top&&i<n.bottom,f=a>n.left&&r<n.right;return c&&f},refreshImgCache:function(e){var n=this.opts.$container,t=this.opts.$scrollContainer.scrollTop(),i=this.opts.showDistance,a=[],u=[],s=n.find(this.opts.objsWrapClass),c={};c.top=t-i,c.bottom=t+o+i,c.left=0,c.right=r,e&&(s=e);for(var f=0;f<s.length;f++){var d=s.eq(f),l=d.find(this.opts.objsClassName);if(this._isInViewPort(d,c))for(var g=0;g<l.length;g++){var p=l.eq(g),m=p.attr(this.opts.objsDataSrc);if(m&&"undefined"!==m&&"null"!==m){var h=this._isInViewPort(p,c);h?a.push(p):u.push(p)}}else for(var g=0;g<l.length;g++){var p=l.eq(g),m=p.attr(this.opts.objsDataSrc);m&&"undefined"!==m&&"null"!==m&&u.push(p)}}this.opts.imgsCache=a,this.opts.imgsRemoveCache=u},_firstCheckImages:function(){var e,t=this;MoGu&&MoGu.ua&&MoGu.ua["native"]?(e=window.setTimeout(function(){t.firstCheck=!0,t.checkImages()},2e3),document.addEventListener("deviceready",function(){return window.clearTimeout(e),window.mgj&&mgj.device&&mgj.device.getInfo?void mgj.device.getInfo(function(e){"string"==typeof e&&(e=JSON.parse(e)),e&&e.networkType&&4!=e.networkType&&5!=e.networkType&&(t.imgQuality=50),n=e&&e.screenWidth>750&&(4==e.networkType||5==e.networkType),t.firstCheck=!0,t.checkImages()}):(t.firstCheck=!0,void t.checkImages())},function(){t.firstCheck=!0,t.checkImages()})):(t.firstCheck=!0,t.checkImages())},checkImages:function(e){var n=this;this.opts.$container;n.firstCheck&&(this.refreshImgCache(e),requestAnimationFrame(function(){$(n.opts.imgsCache).each(function(e,t){var i=t.find(".J_dynamic_img"),o=t.hasClass(n.opts.objsLoadingClass);i.length||o||(t.addClass(n.opts.objsLoadingClass),n.loadingImage.call(n,t))}),$(n.opts.imgsRemoveCache).each(function(e,t){var i=t.find(".J_dynamic_img"),o=t.attr("need-remove")?t.attr("need-remove"):"no";i.length&&"yes"==o&&(t.removeClass(n.opts.objsLoadingClass),i.remove())})}))},loadingImage:function(e){var o=this;o.addSuffix(e);var r=new Image,a=e.attr(this.opts.objsDataSrc),u=e.attr(this.opts.objs3xDataSrc),s="";if(n&&u&&"undefined"!==u)s=o.getWebpUrl(u);else{a=a?a:u;var c=t(a);c&&c.w>750&&(a=i(a)),s=o.getWebpUrl(a)}o.imgErrorClock[s]>=5||(r.src=s,r.complete?e.hasClass(this.opts.objsLoadingClass)&&(e.removeClass(this.opts.objsLoadingClass),e.append('<img class="J_dynamic_img" src="'+r.src+'" alt=""/>')):(r.onload=function(){e.hasClass(o.opts.objsLoadingClass)&&(e.removeClass(o.opts.objsLoadingClass),e.append('<img class="J_dynamic_img" src="'+r.src+'" alt=""/>'))},r.onerror=function(){o.imgErrorClock[s]?o.imgErrorClock[s]++:o.imgErrorClock[s]=1}))},getWebpUrl:function(n){var t=this,i="_999x999.v1c0.",o=t.bodyWidth,r="."+t.imgQuality+".",a=n;if(o>0&&375>=o?i="_375x999.v1c7E"+r:o>375&&750>=o?i="_750x999.v1c7E"+r:o>750&&1125>=o&&(i="_1125x9999.v1c7E"+r),!n||n.indexOf(".webp")>0||n.indexOf(".gif")>0)return n;if(-1===n.indexOf("mogucdn"))return n;if(n.indexOf(".jpg")<0&&n.indexOf(".png")<0)return n;var u="",s=n.split(".");if("jpg"==s[s.length-1])u="jpg";else{if("png"!=s[s.length-1])return n;u="png"}if(n.indexOf(".png_")<0&&n.indexOf(".jpg_")<0&&n.indexOf("."+u)==n.length-4&&(n+=i+u),!e)return"png"==u?a:n;if(n.indexOf("."+u+"_")>0){var s=n.split(".");if(s[s.length-1]==u)return s[s.length-1]="webp",s.join(".")}return n},getGoodsDprCode:function(e){var n=this,t="",i=".v1cAC";switch(e.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":t=e.attr("suffix-ratio");break;default:t=n.dprDefRatio,i=".v1c96"}var o=parseInt(e.attr("suffix-width")||e[0].offsetWidth)*n.dpr;(!o||0>o||o>n.dprDefMaxWidth)&&(o=n.dprDefMaxWidth);for(var r=0;r<n.imgKeyArr.length;r++){var a=n.imgKeyArr[r];if(a>=o||a==n.dprDefMaxWidth)return n.imgKeyMap[a][t]+i}return!1},addSuffix:function(e){var n=this,t=e.attr("img-src");if(/res\.meilishuo\.net/.test(t))return!0;var i=e.attr("suffix-model"),o="",r="."+n.imgQuality+".";switch("no"==e.attr("add-quality")&&(r="."),i){case"add_code":o=$.trim(e.attr("suffix-code"));break;case"orig_narrow":window.devicePixelRatio<2&&(o="50000x50000.v1c7E");break;case"goods_dpr":o=n.getGoodsDprCode(e);break;default:return!1}if(e.attr("suffix-model","end"),!t||!o||t.indexOf(".webp")>0||t.indexOf(".gif")>0)return!1;if(o="_"+o,t.indexOf(".jpg")<0&&t.indexOf(".png")<0)return!1;if(t.indexOf(".jpg_")>0||t.indexOf(".png_")>0)return!1;var a="",u=t.split(".");if("jpg"==u[u.length-1])a="jpg";else{if("png"!=u[u.length-1])return!1;a="png"}return e.attr("img-src",t+o+r+a),!0},destroy:function(){$(window).off("scroll.globalScroll")}},$(function(){MoGu.DynamicImage=a,MoGu.dynamicImage=new MoGu.DynamicImage({$container:$(document.body),showDistance:600})}),MoGu}),define("fn/time",["fn/fn"],function(){var e,n=!1,t=!1,i=0,o=[],r=function(){window.console&&window.console.log&&window.console.log("get server time error"),e=new Date,$(window).trigger("getServerTime",e),n=!0},a=function(){return $.ajax({url:"http://time.mogujie.com/time.php",type:"GET",timeout:10001,dataType:"jsonp",jsonpCallback:"jquery_get_time_ver1"})},u=function(){a().done(function(t){if(t&&t.result&&t.result.time){var o=new Date(1e3*t.result.time);e=o,i=+new Date-o.getTime(),$(window).trigger("getServerTime",o),n=!0}else r()}).fail(r)},s=function(e){for(o.length;o.length>0;){var n=o.shift();n(e)}};MoGu.fn=$.extend({},MoGu.fn,{forceGetRealTime:function(e){a().done(function(n){if(n&&n.result&&n.result.time){var t=new Date(1e3*n.result.time);e(t)}else e(new Date)}).fail(function(){e(new Date)})},getDiff:function(){return i},getServerTime:function(i){o.push(i),t||(t=!0,$(window).on("getServerTime",function(e,n){s(n)}),u()),n&&s(e)}})}),define("fn/showlog",["fn/fn","core/ua","core/cube/app"],function(){function e(e){return"none"!=e.css("display")&&"hidden"!=e.css("visibility")&&0!=e.css("opacity")&&e.width()&&e.height()}function n(n){var t=n.offset().top,i=n.height(),o=n.offset().left,r=n.offset().width,a=$(window).scrollTop(),u=$(window).scrollLeft(),s=$(window).width(),c=$(window).height(),f=t>=a&&a+c>t,d=t+i>a&&a+c>=t+i,l=a>t&&t+i>a+c,g=o>=u&&u+s>o,p=o+r>u&&u+s>=o+r,m=u>o&&o+r>u+s;return e(n)&&(f||d||l)&&(g||p||m)}function t(){if(h.length||w){var e=function(e){i||(i=e),w?(w.ver=i||"",y(m||70500,w),w=null,m=null):(y(m||70500,{acms:h,iids:v,indexs:x,ver:i||""}),h=[],v=[],x=[],m=null)};!i&&MoGu.ua["native"]&&MoGu&&MoGu.fn&&MoGu.fn.getAppVersionAsync?MoGu.fn.getAppVersionAsync(e):e(i)}$("."+a).length?(o=!0,window.setTimeout(t,1e3)):o=!1}var i="",o=!1,r=!1,a="rec-show-log",u="show-log-item",s="waiting-log",c="log-custom",f="data-log-content",d="data-log-iid",l="data-log-index",g="preserve-log",p=$("."+a),m=null,h=[],w=null,v=[],x=[],y=function(e,n){var t=window&&window.logger&&window.logger.log;t&&t(e,n)},b=function(e){var n=e.attr(f),t=n.split(";");$(t).each(function(e,n){var t=n.split("="),i=t[0];i&&(w=w||{},w[i]=w[i]||[],w[i].push(n.replace(i+"=","")))})},C=function(){$("."+a).each(function(e,t){var i=$(t);if(n(i)||i.hasClass(s)){i.removeClass(s);var o=i.attr(g),r=i.find("."+u);r.length?$(r).each(function(e,t){var o=$(t);if(n(o)||o.hasClass(s)){if(o.removeClass(s),m&&m!==i.data("eventid"))return i.addClass(s),void o.addClass(s);o.hasClass(c)?b(o):(null!==o.attr(l)&&""!==o.attr(l)&&void 0!==o.attr(l)&&x.push(o.attr(l)),o.attr(f)&&h.push(o.attr(f)),o.attr(d)&&v.push(o.attr(d))),m=i.data("eventid"),o.removeClass(c).removeClass(u).removeAttr(f).removeAttr(d).removeAttr(l)}}):o||i.removeClass(a)}}),!h.length&&!w||o||t()},j=function(){p=$("."+a),r||(p.length?(r=!0,$(window).scroll(C),$(window).trigger("scroll")):window.setTimeout(j,1e3))};j(),MoGu.fn=$.extend({},MoGu.fn,{showLog:C})}),define("base/MoGu",["core/core","core/const","core/polyfill","core/error","core/ua","fn/fn","fn/time","fn/showlog","ui/ui","ui/tips","core/cube/lazyload","core/cube/app"],function(e){return e}),define("jQuery",function(){return $}),require(["base/MoGu"],function(e){return e});$.fn.listenToLazyData=function(e){var t=$(this).data("source-key");return MoGu&&MoGu.lazyInstance&&MoGu.lazyInstance._cache&&MoGu.lazyInstance._cache[t]?void e({},!0,"",t,MoGu.lazyInstance._cache[t]||[],!1):void $(this).one("receive-data",e)},define("base/core/datalazy",["ui/ui"],function(e){function t(e){window.console&&console.warn&&console.warn.apply&&console.warn.apply&&console.log.apply(console,arguments)}function a(e){window.console&&console.error&&console.error.apply&&console.error.apply(console,arguments)}function o(e,t,a){var o=e.top,n=o+e.height;return a=a||0,t-a>n||o>t+d+a?!1:!0}function n(e){return"none"!=e.css("display")&&"hidden"!=e.css("visibility")&&0!=e.css("opacity")&&e.width()}function r(e){var t={},a=e.split(";");return $(a).each(function(e,a){var o=a.split("="),n=o[0];n&&(t[n]=a.replace(n+"=",""))}),t}function c(t,a,o){var n=t.find("#template-tpl").html(),r=e.ui.getTemplate(n,a||[]),c=t.find(t.data("placeholder")||".entry-wrap");o?c.append(r):c.html(r)}function s(e){!this instanceof s&&a("please new function"),this.init(e)}"function"!=typeof Object.assign&&!function(){Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),a=1;a<arguments.length;a++){var o=arguments[a];if(void 0!==o&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t}}(),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=a.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var r,c,s=[];for(r in n)e.call(n,r)&&s.push(r);if(t)for(c=0;o>c;c++)e.call(n,a[c])&&s.push(a[c]);return s}}()),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var a,o;if(null==this)throw new TypeError("this is null or not defined");var n=Object(this),r=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(a=t),o=0;r>o;){var c;o in n&&(c=n[o],e.call(a,c,o,n)),o++}});var i={dynamic:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},merge:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},appolo:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mce:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mceats:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mceonline:{url:"http://mce.meilishuo.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mcereconline:{url:"http://mce.meilishuo.com/jsonp/multirecommend/4",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"}},p=20,u=80,l={loading:1,success:2,paging:3,error:4},d=$(window).height();return s.DEFAULT_CONFIG={timeout:8e3,deviation:d,SELECTORS:{COLD:".coldData",AJAX:".lazyData"}},s.prototype={_cache:{},_ajaxMap:{},_hasReRendered:!1,handler:null,destory:function(){$(window).off("scroll touchmove resize",this.handler)},init:function(e){var t=this;this.config=$.extend({},s.DEFAULT_CONFIG,e),this.prepareAjaxData(),this.loadAjaxData(),this.handler=function(){t.loadAjaxData.call(t)},$(window).on("scroll touchmove resize",this.handler)},prepareAjaxData:function(e){var a=this.config.SELECTORS,o=$(a.AJAX),n=this,c=0,s=1,l=(o.length,e?""+parseInt(100*Math.random()):"");this.$elems=o,o.each(function(e){var a=$(this),o=a.data("source-type"),d=a.data("floornum")||p,f=a.data("source-alone")||"",h=a.data("extra-param")||"",m=a.offset();if(!i[o])return void t("unknown data source type",o);c+=d,c>u&&(c=0,s++),h&&(h=r(h)),(f||h)&&(l=""+parseInt(100*Math.random())),o+=s,o+=l;var y=n._ajaxMap[o]=n._ajaxMap[o]||{source:$.extend(i[a.data("source-type")],{data:h||{}}),refreshType:l,list:[],offset:m};y.list.push({key:a.data("source-key"),dom:a,offset:m,param:null}),m.top<y.offset.top&&$.extend(y.offset,m),a.data("source-type","")})},updateAjaxMap:function(e){if(e="boolean"!=typeof e?!1:e,this._hasReRendered&&(e=!0,this._hasReRendered=!1),e){var a=this._ajaxMap;Object.keys(a).forEach(function(e){var o=a[e],n=o.list;if(!o.status)for(var r=0;r<n.length;r++){var c=n[r],s=c.dom,i=s.offset(),p=s.data("source-key");p||t("source-key of the current dom should exist"),p!==c.key&&t("source-key[",p,"] of the current dom should match",c.key),c.offset=i}})}},loadAjaxData:function(){this.updateAjaxMap();var e=this._ajaxMap,a=$(window).scrollTop(),r=this._cache,s=this;for(var i in e)!function(i){var p=e[i];if(!p.status){for(var u=p.list,d=p.source,f=p.refreshType,h=!1,m=0;!h&&m<u.length;m++)h=h||o(u[m].offset,a,s.config.deviation)&&n(u[m].dom);if(h){for(var y=[],m=0;m<u.length;m++)y.push(u[m].key);y=y.join(",");var g=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a+f]=e[a].list);$.extend(r,t);for(var o=0;o<u.length;o++){var n=u[o],i=$(n.dom),d=n.key+f;r[d]&&(i.data("manual")||c(i,r[d]),i.trigger("receive-data",[!0,"",d,r[d]||[]]))}p.status=l.success,setTimeout(function(){s._hasReRendered=!0,$(window).trigger("scroll")},50)},j=function(e){if(e&&e.success&&e.returnCode&&"SUCCESS"==e.returnCode){var t=e.data;g(t)}else v(new Error(e&&e.returnCode||"error interface"))},v=function(e){var a=null;if(!e)return a=$.Deferred(),a.resolve(null),a;if(t("use backup url due to",e.toString()),!d.backupUrl)return void t("no backupUrl");var o=$.ajax;$._ajax&&"jsonp"===d.type&&(o=$._ajax);var n=$.extend({},d.data),r=(y||"").split(",");$(r).each(function(e,t){n[d.backupParam]=t,o.call($,{url:d.backupUrl,type:"GET",dataType:"jsonp",cache:!0,beforeSend:function(e,a){a.url=a.url.substring(0,a.url.indexOf("?")),a.url+="%3Fpid="+t+"&callback=jsonp"+t+"backup"},jsonpCallback:"jsonp"+t+"backup",data:n}).then(function(e){b.call(this,e,t)})})},b=function(e,t){if(e&&e.success&&e.returnCode&&"SUCCESS"==e.returnCode){var a={};a[t]=e.data,g(a)}};p.status=l.loading;var k=$.ajax;$._ajax&&"jsonp"===d.type&&(k=$._ajax);var w={};$(".page_activity").hasClass("debug")&&(w=$.extend(w,{testing:1}));var x=$.extend(w,d.data);x[d.param]=y;var _="jsonp"+y.replace(/,/g,"_");_&&window[_]&&"function"==typeof window[_]&&(_+="new"),k.call($,{url:d.url,type:"jsonp"!==d.type?d.type:"GET",dataType:"jsonp"!==d.type?"json":"jsonp",data:x,cache:!0,timeout:s.config.timeout,jsonpCallback:_}).done(j).fail(v)}}}(i)}},s}),require(["base/MoGu","base/core/datalazy"],function(e,t){$(function(){var a=new t;return e.lazyInstance=a,e})});require(["base/MoGu"],function(e){function o(e,o,i){var t=new Date;t.setTime(t.getTime()+24*i*60*60*1e3);var r="expires="+t.toUTCString();document.cookie=e+"="+o+"; "+r+"; domain=.meilishuo.com; path=/"}var i=/meilishuo4android|meilishuo4ios/i.test(window.navigator.userAgent.toLowerCase());e.ua["native"]&&!i&&$.ajax({url:"http://www.meilishuo.com/cookie/internal/getcrosstoken",type:"GET",dataType:"jsonp"}).then(function(e){e&&1001==e.code?$.ajax({url:"http://portal.meilishuo.com/api/cross/meilishuo/setsign",dataType:"jsonp",type:"GET",data:{crossToken:e&&e.result&&e.result.crossToken}}).then(function(e){e&&e.status&&1001==e.status.code&&e.result&&e.result.sign&&o("__mogujie",encodeURIComponent(e.result.sign),30),window.triggerCookieAfter&&window.triggerCookieAfter(),window._hasTriggerCookie=!0}):(window.triggerCookieAfter&&window.triggerCookieAfter(),window._hasTriggerCookie=!0)})});!function(){function i(){window.PTP_PARAMS=window.PTP_PARAMS||{},$.extend(window.PTP_PARAMS,{EnableLogMoGuJs:!1,uuid:"__mgjuuid",uid:"__ud_",ptp_cnt_c_d:function(i){if(!i)return{c:0,d:0};if($(i).data("ptp-customc"))return{c:$(i).data("ptp-customc"),d:0};for(var e=$(i).parent(),n=0;e&&$(e)[0]!=$(document)[0]&&!e.data("ptp");)e=e.parent();return $($(e).find("a")).each(function(e,o){o===i&&(n=e)}),{c:e.data("ptp")||"0",d:n}},platform:function(){var i=window.location.href,e=navigator.userAgent;return-1!=e.indexOf("meilishuo4android")||-1!=e.indexOf("meilishuo android")?"24":-1!=e.indexOf("meilishuo4ios")||-1!=e.indexOf("Meilishuo iPhone")?"23":/iphone|android|ipad/i.test(e)?-1!==i.indexOf("weixin.meilishuo.com")||-1!==i.indexOf("category/wx")||-1!==i.indexOf("/wx/")||-1!==i.indexOf("act.meilishuo.com/categoods")||-1!==i.indexOf("wxsearch")?"47":"34":"33"},hrefRe:/http[s]?:\/\/\w+\.(meilishuo|mogujie)\.com([\/]|\/.*|)$/,mgjRe:/(meilishuo|mls):\/\//,isNativeRe:/(meilishuo|mls|mogujie)/i,nativeLog:{}})}i()}();!function(e){"use strict";function t(){this.arr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.arrLen=this.arr.length}function n(){var e=d.getPtpInfoAndExtra(),t=a.getValue(p.pEventId);f.logData("p",t,e),p.EnableLogMoGuJs&&f.sendLog(p.LogMoGuJsUrl,e,!0)}function r(){if(i.info.isNative){var e=d.getPtpCnt();f.logAppPevent(e)}else s?n():$(window).one("LoggerReady",function(){n()})}var i=e.logger={};i.version="0.1.6","undefined"==typeof console&&(window.console={log:function(){}});var o="**logger.js---打点出错:",a={getIEVersion:function(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))),t},stringify:function(e){if("undefined"!=typeof JSON)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,i=[],o=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=a.stringify(r)),i.push((o?"":'"'+n+'":')+String(r)));return(o?"[":"{")+String(i)+(o?"]":"}")},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},getCookieInArray:function(e){for(var t=0,n=e.length;n>t;t++){var r=a.getCookie(e[t]);if(r)return r}return""},getCookieOrFunc:function(e){return"function"==typeof e?a.getValue(e):a.getCookie(e)},getCookie:function(e){if(a.isArray(e))return a.getCookieInArray(e);var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},getQuery:function(e,t){void 0===t&&(t=location.href);var n="(^|&|\\?)"+e+"=([^&]*)(&|$)",r=new RegExp(n,"i"),i=t.substr(1).match(r);return null!==i?decodeURIComponent(i[2]):""},setQuery:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n},getTime:function(){return parseInt((new Date).getTime()/1e3)},registerEvent:function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},getValue:function(e){if(e){if("function"==typeof e)try{var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}catch(n){return console.log(o+n),""}return e}}};i.util=a;var u="https:"===location.protocol?"https:":"http:",c="mogujie";-1!=location.host.indexOf("meilishuo")&&(c="meilishuo"),i.config={EnableLogMoGuJs:!0,LogUrl:u+"//log.juangua.com/log.php",LogMoGuJsUrl:u+"//log.juangua.com/mogu.js",CookieUrl:u+"//portal."+c+".com/api/util/getUuid",shouldRequestCookie:function(){if(-1!=location.protocol.indexOf("file:"))return!1;var e=i.util.getCookieOrFunc(i.config.uuid);return e?!1:!0},uuid:["__mgjuuid","__xduuid"],uid:"__ud_",sfrom:"from_site",cpsinfo:"__cpsinfo",ptp_cnt_a:"",ptp_cnt_b:"",ptp_cnt_c_d:"",platform:"",pEventId:"1001",isMobileRe:/iphone|android|ipad/i,ptpRe:/[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+/i,hrefRe:/http[s]?:\/\/\w+\.(mogujie|xiaodian|uniny)\.com([\/]|\/.*|)$/,mgjRe:/mgj:\/\//,mtRe:/\?.*[&]?mt=([^\.]+)\.([^\.]+)\.([^\.&#]+)/,chasing:["f","f2"],urlExtend:["acm"],extra:{},isNativeRe:/mogujie(?!nonative)/i,nativeLog:{}},window.PTP_PARAMS&&a.extend(i.config,PTP_PARAMS),t.prototype={rand:function(e){var t,n="";for(t=0;e>t;t++)n+=this.arr.charAt(Math.random()*this.arrLen);return n},code:function(e,t){var n,r=0,i=e.split("");for(n=0;n<i.length;n++)r=t*r+i[n].charCodeAt(0);return Math.abs(r)},hash:function(e,t,n){if(!e||1>n)return"";for(var r=this.code(e,t),i="",o=0,a=0;i.length<n&&(o=r/this.arr.length,a=r%this.arr.length,i+=this.arr.charAt(a),0!==o);)r=o;return i.toString()},pageHash:function(e){return this.hash(e,31,4)+this.hash(e,33,4)}},function(){var e=i.config,t=navigator.userAgent.toLocaleLowerCase();i.info={isApp:e.isNativeRe.test(t),isNative:e.isNativeRe.test(t),isMobile:e.isMobileRe.test(t),isIos:t.indexOf("iphone")>-1,isAndroid:t.indexOf("android")>-1,isXd:location.href.indexOf(".xiaodian.")>-1}}(),function(){function e(e,t){for(var n,r=0;r<e.length;r++)if(n=new RegExp(e[r]),n.test(t))return!0;return!1}i.needReferFix=!1;var t=navigator.userAgent.toLocaleLowerCase(),n=i.info.isApp&&i.info.isAndroid,r=-1!=t.indexOf("meilishuo"),o=-1!=t.indexOf("mogujie"),a=-1!=t.indexOf("referfix=1"),u=["^http://(m|www).mogujie.com/x6/wall/book/([a-z]+)/?(\\S*)$","^http://(m|www).mogujie.com/x6/marketchannel\\?(\\S*)$","^http://(m|www).mogujie.com/x6/detail/(\\w*)[\\?]?(\\S*)$","^http://(m|www).mogujie.com/x6/shop/(.*?)/goodsall[\\?]?(\\S*)$","^http://(m|www).mogujie.com/x6/account/getprofile[\\?].*?uid=(\\w*).*?$","^http://(m|www).mogujie.com/x6/attention/lifestyle[\\?].*?id=(\\w*).*?((ptp|url_ptp)=([\\w.]+))?$","^http://(m|www).mogujie.com/x6/shop/(\\w+)/?(\\?(.*))?$","^http://(m|www).mogujie.com/x6/book/([a-z]+)/?(\\S*)$","^http://(m|www).mogujie.com/x6/search/?\\?keywords=([^&]+)(\\S*)$"],c=["^https?://sgitem.meilishuo.com/sgdetail/(\\w+)/?\\??(.*?)$","^https?://item.meilishuo.com/h5/detail/(\\w+)/?\\??(.*?)$","^https?://www.mogujie.com/trade/order/detail4buyer\\?.*?orderId=(\\w+).*?$","^https?://www.mogujie.com/trade/refund/detail\\?.*?itemOrderId=(\\w+).*?$","^(http|https)://sgitemapp.meilishuo.com/sgdetail/(\\w+).*?$","^https?://act.meilishuo.com/keyword/?\\??(.*?)?$","^https?://weixin.meilishuo.com/wx/shop/(\\w+)/?\\??(.*?)$"];i.matchNativeLink=e;var d=function(t){return-1!=t.indexOf("mls://")?!0:e(c,t)},p=function(t){return-1!=t.indexOf("mgj://")?!0:-1==t.indexOf("/x6/")?!1:e(u,t)};i.isMgjNativeLink=p;var f=function(){var e="";if(n){if(a)return!0;var i=t.match(/\/(\d{3})\//);if(i&&i[1]){if(e=parseInt(i[1]),r&&832>=e)return!0;if(o&&806>=e)return!0}}return!1},s=function(e){return i.util.setQuery(e,"_isfilter","1")};i.needReferFix=f(),i.fixReferUrl=function(e){return r&&d(e)?e:o&&p(e)?e:s(e)}}(),function(){function e(){var e=a.getValue(s.ptp_cnt_a);if(e)return e;var t="1";return g.isXd&&(t="xd1"),g.isMobile&&(t="m1"),g.isIos&&g.isNative?t="am0":g.isAndroid&&g.isNative&&(t="am1"),t}function n(){var e=a.getValue(s.ptp_cnt_b);if(e)return e;var t="",n=location.href.replace(":","");return n=n.replace(/[\/\.]/,"_"),t=l.pageHash(n)}function r(){var e=a.getCookieOrFunc(s.cpsinfo);if(e)return e=e.replace("-",",")}function o(){var e=a.getValue(s.platform);return e?e:g.isMobile?32:31}function u(e){if(e){var t=a.getValue(s.ptp_cnt_c_d,e);if(t)return t;var n=e.getAttribute("data-ptp-customc");if(n)return{c:n,d:$('[data-ptp-customc="'+n+'"]').index($(e))+1};if(e=$(e).parents("[data-ptp-customc]")[0])return n=e.getAttribute("data-ptp-customc"),n?{c:n,d:$('[data-ptp-customc="'+n+'"]').index($(e))+1}:void 0}}function c(){-1!=location.protocol.indexOf("file:")&&document.addEventListener("deviceready",function(){window.hybrid&&hybrid.bundle&&hybrid.bundle.getUrl&&hybrid.bundle.getUrl(function(e){m&&(m.refer=e)})},!1)}function d(){return c(),{time:a.getTime(),sfrom:a.getCookieOrFunc(s.sfrom),uuid:a.getCookieOrFunc(s.uuid),uid:a.getCookieOrFunc(s.uid),cpsinfo:r()||"",refer:location.href,rerefer:document.referrer,ptp_url:a.getQuery("ptp",location.search),ptp_ref:a.getQuery("ptp",document.referrer)}}function p(){return{a:e(),b:n(),c:0,d:0,e:l.rand(5)}}var f,s=i.config,g=i.info,l=new t,m=d(),h=p();i.ptp=f={getPtpByType:function(e,t){var n=o(),r=[m.time,0,"p/e",n,i.version,"1001",m.uuid,m.uid,m.refer,m.rerefer];return"p"==e?(t=t||"1001",r[2]="p",r[5]=t,r):"e"==e?(t=t||"50001",r[2]="e",r[5]=t,r):void 0},getPtpCnt:function(e,t){return e||(e=h.c),t||(t=h.d),[h.a,h.b,e,t,h.e].join(".")},getPtpInfo:function(){var e={};return a.extend(e,m,{ptp_cnt:f.getPtpCnt()})},getPtpInfoAndExtra:function(){var e=f.getPtpInfo(),t={};if(s.extra)for(var n in s.extra)s.extra.hasOwnProperty(n)&&(t[n]=a.getValue(s.extra[n]));return a.extend(e,t)},createPtpCnt:function(e){var t=u(e),n="",r="",i=0,o=0;if(t)return f.getPtpCnt(t.c,t.d);if(e&&e.href&&(n=e.href.match(s.mtRe)),n&&(r="_mt-"+n[2]+"-"+n[3]),r)i=r;else{var a=$(e).parents("[data-ptp]");if(a.length){i=a.attr("data-ptp");var c=a.find(".data-ptp-item");o=c.length?c.index($(e).parents(".data-ptp-item"))+1:a.find("a").index($(e))+1}}return o||(o=0),f.getPtpCnt(i,o)},makeUrl:function(e,t,n){var r=e.match(/(#.+)$/);return e=e.replace(/(#.+)$/,""),e=a.setQuery(e,"ptp",t),e=f.getChasingParams(e),e=f.getExtendParams(n,e),i.needReferFix&&(e=i.fixReferUrl(e)),r&&(e+=r[1]),e},getChasingParams:function(e){void 0===e&&(e="");var t=e;if(!s.chasing)return t;s.chasing.length||(s.chasing=[s.chasing]);for(var n,r,i=0,o=s.chasing.length;o>i;i++)n=s.chasing[i],r=a.getQuery(n),r&&(t=a.setQuery(t,n,r));return t},getExtendParams:function(e,t){var n=t;if(!e||!$(e).is("a"))return n;for(var r=s.urlExtend||[],i=0,o=r.length;o>i;i++){var u=r[i],c=$(e).attr("data-ext-"+u);c&&(n=a.setQuery(n,u,c))}return n},refreshPtp:function(){m=d(),h=p()},refreshCookie:function(){m&&(m.sfrom=a.getCookieOrFunc(s.sfrom),m.uuid=a.getCookieOrFunc(s.uuid),m.uid=a.getCookieOrFunc(s.uid),m.cpsinfo=r())}}}(),function(){var e=i.info,t=i.ptp,n=i.config,r=0,u=function(e,t){t=t||{};var n=[];for(var r in t){var i=t[r];i||(i=""),i=encodeURIComponent(i),n.push(r+"="+i)}n=n.join("&"),e=e.indexOf("?")>-1?e+"&"+n:e+"?"+n;var o=new Image;o.src=e},c=function(e,t){t=t||{};var n,i=r++;try{n=document.createElement('<iframe name="'+i+'">')}catch(u){n=document.createElement("iframe"),n.setAttribute("name",i)}try{n.style.display="none",document.body.appendChild(n),n.contentWindow.name=i;var c=document.createElement("form");c.setAttribute("method","POST"),c.setAttribute("action",e),c.setAttribute("target",i);for(var d in t)if(t.hasOwnProperty(d)){var p=document.createElement("input");p.setAttribute("type","hidden"),p.setAttribute("name",d),p.setAttribute("value",t[d]),c.appendChild(p)}document.body.appendChild(c),c.submit(),a.registerEvent(n,"load",function(){try{document.body.removeChild(c),document.body.removeChild(n)}catch(e){}})}catch(u){console.log(o+u)}},d={sendLog:function(e,t,n){var r=-1!=a.getIEVersion();r&&!n?c(e,t):u(e,t)},sendAppLog:function(e,t){return e+="",n.nativeLog&&n.nativeLog.logE?n.nativeLog.logE(e,t):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.tracker.sendEvent",e,t):document.addEventListener("deviceready",function(){window.mgj&&mgj.tracker&&mgj.tracker.sendEvent&&mgj.tracker.sendEvent(e,t)},!1))},logAppPevent:function(e){return n.nativeLog&&n.nativeLog.logP?n.nativeLog.logP(e):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.pevent",e).then(function(){},function(e){console.log("pevent:"+e)}):document.addEventListener("deviceready",function(){window.mgj&&mgj.pevent&&mgj.pevent(function(){},null,e)},!1))},logData:function(r,i,o){var u=t.getPtpByType(r,i);u.push(a.stringify(o)),e.isNative?d.sendAppLog(i,o):d.sendLog(n.LogUrl,{v:1,data:u.join("	")})}};i.send=d}(),function(){function e(e){var t=e.href;if(!(t.indexOf("mogujie.com/mtalk/")>-1)&&(n.hrefRe.test(t)||n.mgjRe.test(t))){var i=e.getAttribute("data-ptp-cache-id");t=e.getAttribute("href"),i&&n.ptpRe.test(i)||(i=r.createPtpCnt(e),e.setAttribute("data-ptp-cache-id",i)),e.href=r.makeUrl(t,i,e)}}function t(t){var n=t||window.event,r=n.target||n.srcElement,i="A"===r.nodeName?r:$(r).parents("a")[0],o="AREA"===r.nodeName?r:null;o&&(i=o),i&&(i.href&&i.href.indexOf("javascript:")>-1||e(i))}var n=i.config,r=i.ptp,o="tap"in document.createElement("div")?"tap":"mousedown";a.registerEvent(document,o,t),a.registerEvent(document,"touchstart",t)}();var d=i.ptp,p=i.config,f=i.send,s=!p.shouldRequestCookie();if(s||$.ajax({url:p.CookieUrl,type:"GET",dataType:"jsonp",success:function(){s=!0,i.ptp.refreshCookie(),$(window).trigger("LoggerReady")}}),r(),i.refreshPevent=function(){i.ptp.refreshPtp(),r()},i.log=function(e,t){if(void 0!==e){t=t||{};var n=d.getPtpInfoAndExtra();s?i.send.logData("e",e,a.extend({},n,t)):$(window).one("LoggerReady",function(){var n=d.getPtpInfoAndExtra();i.send.logData("e",e,a.extend({},n,t))})}},i.generatePtpParams=function(e,t){if(void 0!==e){var n="";return n=t?d.createPtpCnt(t):d.getPtpCnt(),d.makeUrl(e,n,t)}},i.needReferFix&&document.referrer){var g=d.getPtpInfoAndExtra();i.log("016000616",{ptp_cnt2:g.ptp_cnt,ptp_url2:g.ptp_url,ptp_ref2:g.ptp_ref})}"undefined"!=typeof module&&"object"==typeof exports?module.exports=i:"function"==typeof define&&(define.amd||define.cmd)&&define("logger",function(){return i})}(window);