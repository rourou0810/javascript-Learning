define("components/waterfallOptimise",["base/MoGu","components/waterfall"],function(t,n){function e(t){var n,e=a._curTop;if(e){if(n=a[0].height/2,Math.abs(t-e)>n)return a._curTop=t,!1}else a._curTop=t;return!0}function i(t,n){if(a=t,a.length&&!e(n)){var i=a.length,s=o(n),f=s-w,u=s+w;0>f?f=0:r(0,f-1,c),u>=i?u=i-1:r(f+1,i-1,c),r(f,u,h),a=null}}function o(t){for(var n,e,i,o,r=a,s=0,f=r.length,l=t+u;;){if(s>=f)return s;if(n=parseInt((s+f)/2),e=r[n],i=e.top,o=i+e.height,t>o)s=n+1;else{if(!(i>l))return n;f=n-1}}}function r(t,n,e){for(var i;n>=t;t++)i=a[t],i.state||(i.state=h),i.state!==e&&(i.el.className=i.baseClass+" "+e,i.state=e)}var a,s=window.$,f=s(window),u=f.height(),l=n.CONS,c=l.HIDE,h=l.SHOW,p=l.FORCE_CHECK,g=4,w=g,m=g;return f.on(p,function(){a&&a.length&&(a._curTop=-9999,i(a,f.scrollTop()))}),{initRange:function(t){w=g*t,m=w+1},optimise:i}});